# ソフトウェア基礎特論　期末レポート課題
理工学研究科　情報科学専攻　1年55組1番（4555255001）　岡本 八仁

## 今回題材としたゲーム・パズル
[**ドンジャラ（ドラえもんDXルール）**](https://bandainamco-bcpombucket1.s3.amazonaws.com/docs/answers/url/4543112801173.pdf )<br>
基本は麻雀に近しいゲーム性だが、いくつか異なる点があるため以下に記載する。

- 牌に、番号（一萬～九萬など（の概念が存在しない）
  - そのため、順子が存在しない（刻子のみ）
- チー、ポン、カンといった他人が捨てた牌を獲得するルールが存在しない
  - そのため、槓子も存在しない
- 牌の種類や数が異なる
  - （ドラえもん×9, のび太×9, しずか×9, ドラミ×9, ジャイアン×9, スネ夫×9, ひみつ道具×9, のび太のママ×3, のび太のパパ×3, セワシ×3, 出木杉×3, ジャイ子×3）
- 手牌が8個であり、毎ターン1つツモって捨てるゲーム性である
- 役が異なる（参考：https://toy.bandai.co.jp/series/donjara/item/detail/13494/）

## システム構成
今回はドンジャラのシステムをWebアプリケーション形式で実装した<br>
（使用技術：React + TypeScript）<br>
・ルールごとに牌の数/種類や役の種類をJSON形式で指定できるように設計を行った<br>
（以下は実際にドラえもんDXのルールを指定した場合のJSONファイル）
![alt text](image.png)<br>
（中略）<br>
![alt text](image-1.png)

実際のプレイ画面は以下のようになっている
![alt text](image-4.png)

## 作成したプレイヤ
今回は、以下の2種類の戦略をとるプレイヤを実装した。<br>
- 1：ランダムプレイヤ
  - 手牌（8個）+ツモ牌（1個）から完全ランダムに1個捨てる戦略
  - リーチできる場合はリーチする
- 2：手牌と役の近さを評価するプレイヤ
  - 手牌（8個）+ツモ牌（1個）すべてに対して、それを捨てた後の手牌とすべての役の組み合わせを全探索する
  - 各役に対して、「後何枚足りないか」を計算する
    - 各役に対して、（役の点数） / (足りない枚数 + 1)を求め、その合計を求める
  - 捨てた結果最も評価値が高くなるものを捨てる
  - リーチできる場合はリーチする


## 評価
ドンジャラ（ドラえもんDXルール）にのっとり、以下のようなルールで各プレイヤ（戦略）の評価を行った。
- 各プレイヤの初期持ち点は600,000点
- 親はランダムにプレイヤから選び、半荘を行う（親が2周するまで行う）
- 親が上がった場合は次のセットも同じプレイヤが親となり、そうでない場合は時計回りに親が移動する
- ロン上がりの場合は放銃したプレイヤーから役の点数を獲得し、ツモ上がりの場合は他3人から均等に1/3ずつ獲得する<br>

以上のルールでそれぞれ10半荘し、終了時点の持ち点を調査した。

### 評価結果
- P0：手牌と役の近さを評価するプレイヤ
  - 1位率：90.0%
  - 2位率：10.0%
  - 3位率： 0.0%
  - 4位率： 0.0%
  - 平均持ち点：862,333.0点
- P1：ランダムプレイヤ
  - 1位率：10.0%
  - 2位率：30.0%
  - 3位率：40.0%
  - 4位率：20.0%
  - 平均持ち点：529,334.2点
- P2：ランダムプレイヤ
  - 1位率： 0.0%
  - 2位率：30.0%
  - 3位率：40.0%
  - 4位率：30.0%
  - 平均持ち点：498,000.6点
- P3：ランダムプレイヤ
  - 1位率： 0.0%
  - 2位率：30.0%
  - 3位率：20.0%
  - 4位率：50.0%
  - 平均持ち点：510334.0点

以上のような結果となり、1位率や最終持ち点の観点からも十分に優れているプレイヤを作成できたと考える。